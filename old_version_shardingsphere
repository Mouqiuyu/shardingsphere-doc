commit c36500e594d97148cd12658ddd58a93c361ef290
Author: ChenJiaHao <Pace2Car@163.com>
Date:   Mon Mar 6 17:00:58 2023 +0800

    Add DistSQL LOCK CLUSTER (#24441)
    
    * Add DistSQL LOCK CLUSTER
    
    * Fix unit test
    
    * Refactor get cluster lock key
    
    * Fix code style
    
    * Fix code style
    
    * Remove proxy backend spi module
    
    * Refactor sql statement check for cluster state

diff --git a/docs/document/content/dev-manual/mode.cn.md b/docs/document/content/dev-manual/mode.cn.md
index 3450932aecc..46339d1f9c2 100644
--- a/docs/document/content/dev-manual/mode.cn.md
+++ b/docs/document/content/dev-manual/mode.cn.md
@@ -52,11 +52,13 @@ chapter = true
 
 ### 已知实现
 
-| *配置标识*                                                               | *详细说明*                             | *全限定类名*                    |
-| ----------------------------------------------------------------------- | --------------------------------------| ---------------------------- |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes      | 计算节点状态变化监听器                   | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.compute.watcher.ComputeNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/compute/watcher/ComputeNodeStateChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /metadata/${databaseName} | 元数据变化监听器                        | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.metadata.watcher.MetaDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/metadata/watcher/MetaDataChangedWatcher.java) |
-| Types: ADDED, UPDATED; WatchingKeys: /props                             | 属性变化监听器                          | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.PropertiesChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/PropertiesChangedWatcher.java) |
-| Types: UPDATED; WatchingKeys: /rules                                    | 全局规则变化监听器                       | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.GlobalRuleChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/GlobalRuleChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /sys_data                 | 系统库变化监听器                       | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.ShardingSphereDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/data/ShardingSphereDataChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/storage_nodes      | 存储节点状态变化监听器                    | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.storage.watcher.StorageNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/storage/watcher/StorageNodeStateChangedWatcher.java) |
+| *配置标识*                                                                    | *详细说明*      | *全限定类名*                                                                                                                                                                                                                                                                                                                                                 |
+|---------------------------------------------------------------------------|-------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes/status | 集群状态变化监听器   | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.cluster.watcher.ClusterStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/cluster/watcher/ClusterStateChangedWatcher.java)         |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes        | 计算节点状态变化监听器 | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.compute.watcher.ComputeNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/compute/watcher/ComputeNodeStateChangedWatcher.java) |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /metadata/${databaseName}   | 元数据变化监听器    | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.metadata.watcher.MetaDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/metadata/watcher/MetaDataChangedWatcher.java)                             |
+| Types: ADDED, UPDATED; WatchingKeys: /props                               | 属性变化监听器     | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.PropertiesChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/PropertiesChangedWatcher.java)                             |
+| Types: UPDATED; WatchingKeys: /rules                                      | 全局规则变化监听器   | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.GlobalRuleChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/GlobalRuleChangedWatcher.java)                             |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /sys_data                   | 系统库变化监听器    | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.ShardingSphereDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/data/ShardingSphereDataChangedWatcher.java)                       |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/storage_nodes        | 存储节点状态变化监听器 | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.storage.watcher.StorageNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/storage/watcher/StorageNodeStateChangedWatcher.java) |
+| Types: DELETED; WatchingKeys: /lock/exclusive/locks/cluster_lock          | 集群锁释放监听器    | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.cluster.watcher.lock.ClusterLockDeletedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/cluster/watcher/lock/ClusterLockDeletedWatcher.java) |
diff --git a/docs/document/content/dev-manual/mode.en.md b/docs/document/content/dev-manual/mode.en.md
index fe5e00b8e0a..f80fec4572f 100644
--- a/docs/document/content/dev-manual/mode.en.md
+++ b/docs/document/content/dev-manual/mode.en.md
@@ -52,12 +52,13 @@ Governance listener definition
 
 ### Implementation classes
 
-| *Configuration Type*                                                    | *Description*                                 | *Fully-qualified class name* |
-| ----------------------------------------------------------------------- | --------------------------------------------- | ---------------------------- |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes      | Compute node state change listener            | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.compute.watcher.ComputeNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/compute/watcher/ComputeNodeStateChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /metadata/${databaseName} | Metadata change listener                      | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.metadata.watcher.MetaDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/metadata/watcher/MetaDataChangedWatcher.java) |
-| Types: ADDED, UPDATED; WatchingKeys: /props                             | Property change listener                      | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.PropertiesChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/PropertiesChangedWatcher.java) |
-| Types: UPDATED; WatchingKeys: /rules                                    | The global rule configuration change listener | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.GlobalRuleChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/GlobalRuleChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /sys_data                 | System database change listener              | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.ShardingSphereDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/data/ShardingSphereDataChangedWatcher.java) |
-| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/storage_nodes      | Storage node state change listener            | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.storage.watcher.StorageNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/storage/watcher/StorageNodeStateChangedWatcher.java) |
-
+| *Configuration Type*                                                      | *Description*                                 | *Fully-qualified class name*                                                                                                                                                                                                                                                                                                                            |
+|---------------------------------------------------------------------------|-----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes/status | Cluster state change listener                 | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.cluster.watcher.ClusterStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/cluster/watcher/ClusterStateChangedWatcher.java)         |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/compute_nodes        | Compute node state change listener            | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.compute.watcher.ComputeNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/compute/watcher/ComputeNodeStateChangedWatcher.java) |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /metadata/${databaseName}   | Metadata change listener                      | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.metadata.watcher.MetaDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/metadata/watcher/MetaDataChangedWatcher.java)                             |
+| Types: ADDED, UPDATED; WatchingKeys: /props                               | Property change listener                      | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.PropertiesChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/PropertiesChangedWatcher.java)                             |
+| Types: UPDATED; WatchingKeys: /rules                                      | The global rule configuration change listener | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.GlobalRuleChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/config/watcher/GlobalRuleChangedWatcher.java)                             |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /sys_data                   | System database change listener               | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.config.watcher.ShardingSphereDataChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/data/ShardingSphereDataChangedWatcher.java)                       |
+| Types: ADDED, UPDATED, DELETED; WatchingKeys: /nodes/storage_nodes        | Storage node state change listener            | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.storage.watcher.StorageNodeStateChangedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/storage/watcher/StorageNodeStateChangedWatcher.java) |
+| Types: DELETED; WatchingKeys: /lock/exclusive/locks/cluster_lock          | Cluster lock release listener                 | [`org.apache.shardingsphere.mode.manager.cluster.coordinator.registry.status.cluster.watcher.lock.ClusterLockDeletedWatcher`](https://github.com/apache/shardingsphere/blob/master/mode/type/cluster/core/src/main/java/org/apache/shardingsphere/mode/manager/cluster/coordinator/registry/status/cluster/watcher/lock/ClusterLockDeletedWatcher.java) |
diff --git a/docs/document/content/user-manual/error-code/sql-error-code.cn.md b/docs/document/content/user-manual/error-code/sql-error-code.cn.md
index 65c504568aa..72d55d22532 100644
--- a/docs/document/content/user-manual/error-code/sql-error-code.cn.md
+++ b/docs/document/content/user-manual/error-code/sql-error-code.cn.md
@@ -48,15 +48,16 @@ SQL 错误码以标准的 SQL State，Vendor Code 和详细错误信息提供，
 
 ### 连接
 
-| SQL State | Vendor Code | 错误信息 |
-| --------- | ----------- | ------ |
-| 08000     | 13000       | Can not register driver, reason is: %s |
-| 01000     | 13010       | Circuit break open, the request has been ignored. |
-| 01000     | 13011       | The current instance is read-only, Not allowed write traffic. |
+| SQL State | Vendor Code | 错误信息                                                                                                                                                                                                                     |
+|-----------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
+| 08000     | 13000       | Can not register driver, reason is: %s                                                                                                                                                                                      |
+| 01000     | 13010       | Circuit break open, the request has been ignored.                                                                                                                                                                           |
+| 01000     | 13011       | The cluster status is read-only.                                                                                                                                                                                            |
+| 01000     | 13012       | The cluster status is unavailable.                                                                                                                                                                                          |
 | 08000     | 13020       | Can not get %d connections one time, partition succeed connection(%d) have released. Please consider increasing the \`maxPoolSize\` of the data sources or decreasing the \`max-connections-size-per-query\` in properties. |
-| 08000     | 13030       | Connection has been closed. |
-| 08000     | 13031       | Result set has been closed. |
-| HY000     | 13090       | Load datetime from database failed, reason: %s |
+| 08000     | 13030       | Connection has been closed.                                                                                                                                                                                                 |
+| 08000     | 13031       | Result set has been closed.                                                                                                                                                                                                 |
+| HY000     | 13090       | Load datetime from database failed, reason: %s                                                                                                                                                                              |
 
 ### 事务
 
diff --git a/docs/document/content/user-manual/error-code/sql-error-code.en.md b/docs/document/content/user-manual/error-code/sql-error-code.en.md
index cc2043bed40..2a289c3fd5c 100644
--- a/docs/document/content/user-manual/error-code/sql-error-code.en.md
+++ b/docs/document/content/user-manual/error-code/sql-error-code.en.md
@@ -48,15 +48,16 @@ SQL error codes provide by standard `SQL State`, `Vendor Code` and `Reason`, whi
 
 ### Connection
 
-| SQL State | Vendor Code | Reason |
-| --------- | ----------- | ------ |
-| 08000     | 13000       | Can not register driver, reason is: %s |
-| 01000     | 13010       | Circuit break open, the request has been ignored. |
-| 01000     | 13011       | The current instance is read-only, Not allowed write traffic. |
+| SQL State | Vendor Code | Reason                                                                                                                                                                                                                      |
+|-----------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
+| 08000     | 13000       | Can not register driver, reason is: %s                                                                                                                                                                                      |
+| 01000     | 13010       | Circuit break open, the request has been ignored.                                                                                                                                                                           |
+| 01000     | 13011       | The cluster status is read-only.                                                                                                                                                                                            |
+| 01000     | 13012       | The cluster status is unavailable.                                                                                                                                                                                          |
 | 08000     | 13020       | Can not get %d connections one time, partition succeed connection(%d) have released. Please consider increasing the \`maxPoolSize\` of the data sources or decreasing the \`max-connections-size-per-query\` in properties. |
-| 08000     | 13030       | Connection has been closed. |
-| 08000     | 13031       | Result set has been closed. |
-| HY000     | 13090       | Load datetime from database failed, reason: %s |
+| 08000     | 13030       | Connection has been closed.                                                                                                                                                                                                 |
+| 08000     | 13031       | Result set has been closed.                                                                                                                                                                                                 |
+| HY000     | 13090       | Load datetime from database failed, reason: %s                                                                                                                                                                              |
 
 ### Transaction
 
